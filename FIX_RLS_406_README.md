# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ 406 (Not Acceptable) –¥–ª—è active_lottery

## üö® –ü—Ä–æ–±–ª–µ–º—ã
1. **–û—à–∏–±–∫–∞ `406 (Not Acceptable)`** –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ —Ç–∞–±–ª–∏—Ü–µ `active_lottery` –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –ø–æ–ª–∏—Ç–∏–∫ Row Level Security (RLS).
2. **–û—à–∏–±–∫–∞ `42501 (RLS Violation)`** –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–µ–π –≤ —Ç–∞–±–ª–∏—Ü–µ `lottery_draws` –∏–∑-–∑–∞ –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö RLS –ø–æ–ª–∏—Ç–∏–∫.
3. **–û—à–∏–±–∫–∞ `22P02 (UUID)`** –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–æ–ª–µ `created_by` —Ç–∞–±–ª–∏—Ü—ã `lottery_draws`.
4. **–û—à–∏–±–∫–∞ `PGRST204`** –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–π –∫–æ–ª–æ–Ω–∫–∏ `scheduled_start_time` (—Ñ—É–Ω–∫—Ü–∏—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞).

## üõ†Ô∏è –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è

### üöÄ –í–∞—Ä–∏–∞–Ω—Ç 1: –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (**–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø**)
**–§–∞–π–ª:** `fix_active_lottery_minimal.sql`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É `active_lottery`
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç RLS –ø–æ–ª–∏—Ç–∏–∫–∏
- ‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞–ø–∏—Å—å
- ‚úÖ –ú–∏–Ω–∏–º—É–º –∫–æ–º–∞–Ω–¥ - –º–∏–Ω–∏–º—É–º –æ—à–∏–±–æ–∫

**–ö–æ–º—É –ø–æ–¥—Ö–æ–¥–∏—Ç:** –í—Å–µ–º, –∫—Ç–æ —Ö–æ—á–µ—Ç –±—ã—Å—Ç—Ä–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É –±–µ–∑ –ª–∏—à–Ω–∏—Ö —Å–ª–æ–∂–Ω–æ—Å—Ç–µ–π.

---

### üîß –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ—Å—Ç–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 
**–§–∞–π–ª:** `fix_active_lottery_simple.sql`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- ‚úÖ –í—Å—ë –∏–∑ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ +
- ‚úÖ –£–¥–∞–ª—è–µ—Ç –±–æ–ª—å—à–µ —Å—Ç–∞—Ä—ã—Ö –ø–æ–ª–∏—Ç–∏–∫
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
- ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏

**–ö–æ–º—É –ø–æ–¥—Ö–æ–¥–∏—Ç:** –ï—Å–ª–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –Ω–µ –ø–æ–º–æ–≥ –∏–ª–∏ –Ω—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏.

---

### üîç –í–∞—Ä–∏–∞–Ω—Ç 3: –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
**–§–∞–π–ª:** `fix_active_lottery_rls_406.sql`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- ‚úÖ –í—Å—ë –∏–∑ –ø—Ä–æ—Å—Ç–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ +
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ç–∞–±–ª–∏—Ü
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –ø–æ–ª–∏—Ç–∏–∫
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏
- ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

**–ö–æ–º—É –ø–æ–¥—Ö–æ–¥–∏—Ç:** –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã –∏–ª–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∏.

---

## üìã –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### üéØ **–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø: –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**
```sql
-- –í Supabase SQL Editor –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –û–î–ò–ù —Å–∫—Ä–∏–ø—Ç:
fix_all_errors_complete.sql
```
**‚úÖ –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç –í–°–ï –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∑–∞ –æ–¥–∏–Ω —Ä–∞–∑:**
- ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ active_lottery (–æ—à–∏–±–∫–∞ 406)
- ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ lottery_draws (–æ—à–∏–±–∫–∞ 42501)  
- ‚úÖ UUID –ø–æ–ª–µ created_by (–æ—à–∏–±–∫–∞ 22P02)
- ‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

---

### üìã **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ: –ü–æ—à–∞–≥–æ–≤–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**

### 1Ô∏è‚É£ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ RLS –¥–ª—è active_lottery (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):
```sql
-- –í Supabase SQL Editor –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
fix_active_lottery_minimal.sql
```

### 2Ô∏è‚É£ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ RLS –¥–ª—è lottery_draws (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):
```sql
-- –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è —Ä–æ–∑—ã–≥—Ä—ã—à–µ–π:
fix_lottery_draws_rls_minimal.sql
```

### 3Ô∏è‚É£ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ UUID (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):
```sql
-- –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –±–µ–∑ –æ—à–∏–±–æ–∫ UUID:
fix_created_by_uuid.sql
```

### 4Ô∏è‚É£ –§—É–Ω–∫—Ü–∏–∏ –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
```sql
-- –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–∞–π–º–µ—Ä—ã:
add_scheduled_start_time.sql
```

### üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã):
```sql
-- –î–ª—è –ø–æ–ª–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è:
fix_active_lottery_rls_406.sql
check_all_rls_policies.sql
```

---

## ‚úÖ –ö–∞–∫ –ø–æ–Ω—è—Ç—å, —á—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ª—é–±–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞:

1. **–û—à–∏–±–∫–∏ 406 –≤ –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω—ã –∏—Å—á–µ–∑–Ω—É—Ç—å**
2. **–í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –∫—Ä–∞—Å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–ø–∞—Å—Ç—å**
3. **–î–∞–Ω–Ω—ã–µ –ª–æ—Ç–µ—Ä–µ–∏ –¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è**

---

## üéØ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤—Å–µ—Ö RLS –ø–æ–ª–∏—Ç–∏–∫:
```sql
check_all_rls_policies.sql
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª—é—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã:
```sql
add_bolivar_currency_system.sql
```

### –§—É–Ω–∫—Ü–∏–∏ –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
```sql
add_scheduled_start_time.sql
```

---

## üÜò –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   - `VITE_SUPABASE_URL`
   - `VITE_SUPABASE_ANON_KEY`

2. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª `.env.local` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ**

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç:**
   ```sql
   check_all_rls_policies.sql
   ```

4. **–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏**

---

## üéÆ –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã

- ‚úÖ **–í–∞–ª—é—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (Bs/USD)** - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ùå **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ª–æ—Ç–µ—Ä–µ–∏** - —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è RLS  
- ‚ùå **–°–æ–∑–¥–∞–Ω–∏–µ —Ä–æ–∑—ã–≥—Ä—ã—à–µ–π** - —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è UUID
- üí§ **–û—Ç–ª–æ–∂–µ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫** - –æ—Ç–∫–ª—é—á–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **RLS active_lottery** - –±–ª–æ–∫–∏—Ä—É—é—Ç –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö
2. **RLS lottery_draws** - –±–ª–æ–∫–∏—Ä—É—é—Ç —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–æ–∑—ã–≥—Ä—ã—à–µ–π
3. **UUID created_by** - –æ—à–∏–±–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏

---

## üîÑ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π:
- üéØ –°–æ–∑–¥–∞–Ω–∏–µ —Ä–æ–∑—ã–≥—Ä—ã—à–µ–π —Å —Ü–µ–Ω–∞–º–∏ –≤ –±–æ–ª–∏–≤–∞—Ä–∞—Ö
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç 
- üìä –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –ª–æ—Ç–µ—Ä–µ–π
- üëë –ü–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏ 