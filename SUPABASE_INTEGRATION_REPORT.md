# üìä –û—Ç—á–µ—Ç –æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ Supabase —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

## üéØ –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π MCP Supabase —Å–µ—Ä–≤–µ—Ä

‚úÖ **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MCP —Å–æ–∑–¥–∞–Ω–∞** –≤ —Ñ–∞–π–ª–µ `mcp-supabase-config.json`
‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ** –≤ —Ñ–∞–π–ª–µ `SUPABASE_MCP_SETUP.md`
‚úÖ **–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ `test-supabase-connection.js`

### üîß –î–∞–Ω–Ω—ã–µ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:
- **Project Ref**: `yetjflxjxujdhemailxx`
- **URL**: `https://yetjflxjxujdhemailxx.supabase.co`
- **Access Token**: `sbp_0e51d7ffced0d731afe6a65999f77a3bddcc63d3`

---

## üìã –ê–Ω–∞–ª–∏–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### ‚úÖ **–ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:**

| –¢–∞–±–ª–∏—Ü–∞ | –°—Ç–∞—Ç—É—Å | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã |
|---------|--------|---------------|------------|
| `number_reservations` | ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ | `useOccupiedNumbers`, `useCreateReservation` | `NumberGrid`, `Statistics` |
| `winners` | ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ | `useWinners` | `RecentWinners`, `Statistics`, `Index` |
| `lottery_history` | ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ | `SupabaseService` | `LotteryHistory` |
| `active_lottery` | ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ | `SupabaseService` | `AdminLotteryPanel` |
| `administrators` | ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ | `use-admin-auth.ts` | –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å |

### ‚ö†Ô∏è **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:**

| –ü—Ä–æ–±–ª–µ–º–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –†–µ—à–µ–Ω–∏–µ |
|----------|----------|---------|
| ‚ùå **`applications`** | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–¥–µ, –Ω–æ **–ù–ï–¢ –≤ –ë–î** | ‚úÖ SQL —Å–æ–∑–¥–∞–Ω: `fix-applications-table.sql` |
| ‚ö†Ô∏è **`lottery_draws`** | –ï—Å—Ç—å –≤ SQL, –Ω–æ **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è** –≤ –∫–æ–¥–µ | –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å |
| ‚ö†Ô∏è **`lottery_settings`** | –ï—Å—Ç—å –≤ SQL, –Ω–æ **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è** –≤ –∫–æ–¥–µ | –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å |

---

## üõ†Ô∏è –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º

### üî• **–ö–†–ò–¢–ò–ß–ù–û - –í—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ:**

1. **–°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `applications`**:
   ```bash
   # –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ SQL Editor Supabase:
   ```
   –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `fix-applications-table.sql` –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ Supabase

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**:
   ```bash
   node test-supabase-connection.js
   ```

### üìÖ **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å:**

3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å MCP —Å–µ—Ä–≤–µ—Ä**:
   - –î–æ–±–∞–≤—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ `mcp-supabase-config.json` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Cursor
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Cursor
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ MCP –≤ –ª–æ–≥–∞—Ö

4. **–û—á–∏—Å—Ç–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã**:
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å `lottery_draws` –∏ `lottery_settings` –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   - –ò–ª–∏ —É–¥–∞–ª–∏—Ç—å –∏—Ö –∏–∑ SQL —Ñ–∞–π–ª–æ–≤ –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ –Ω—É–∂–Ω—ã

5. **–û–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**:
   ```env
   VITE_SUPABASE_URL=https://yetjflxjxujdhemailxx.supabase.co
   VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
   ```

---

## üîç **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü**

### –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–∞–±–ª–∏—Ü—ã –≤ –∫–æ–¥–µ:

**`number_reservations`**:
- `src/hooks/use-supabase.ts` ‚Üí `useOccupiedNumbers`, `useCreateReservation`
- `src/components/NumberGrid.tsx`
- `src/components/Statistics.tsx`

**`winners`**:
- `src/hooks/use-supabase.ts` ‚Üí `useWinners`
- `src/components/RecentWinners.tsx`
- `src/pages/Index.tsx`

**`applications`** ‚ùå:
- `src/hooks/use-supabase.ts` ‚Üí `useApplications`, `useCreateApplication`
- `src/pages/Admin.tsx`
- **–ü–†–û–ë–õ–ï–ú–ê**: –¢–∞–±–ª–∏—Ü–∞ –ù–ï –°–£–©–ï–°–¢–í–£–ï–¢ –≤ –ë–î!

**`lottery_draws`** ‚ö†Ô∏è:
- `src/components/admin/DrawManagement.tsx` 
- **–ù–ï –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ** –≤ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

**`administrators`**:
- `src/hooks/use-admin-auth.ts`
- RPC —Ñ—É–Ω–∫—Ü–∏–∏: `verify_admin_password`, `update_admin_last_login`

---

## üìà **–ú–µ—Ç—Ä–∏–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**

- ‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ**: 5 –∏–∑ 8 —Ç–∞–±–ª–∏—Ü (62.5%)
- ‚ùå **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏**: 1 —Ç–∞–±–ª–∏—Ü–∞ (`applications`)
- ‚ö†Ô∏è **–¢—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è**: 2 —Ç–∞–±–ª–∏—Ü—ã (`lottery_draws`, `lottery_settings`)
- üéØ **–¶–µ–ª—å**: 100% —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

---

## üöÄ **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏**

1. **[–ö–†–ò–¢–ò–ß–ù–û]** –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∏–∑ `fix-applications-table.sql`
2. **[–†–ï–ö–û–ú–ï–ù–î–û–í–ê–ù–û]** –ù–∞—Å—Ç—Ä–æ–π—Ç–µ MCP —Å–µ—Ä–≤–µ—Ä –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `SUPABASE_MCP_SETUP.md`
3. **[–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û]** –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç `test-supabase-connection.js`
4. **[–ü–õ–ê–ù–ò–†–û–í–ê–ù–ò–ï]** –†–µ—à–∏—Ç–µ —Å—É–¥—å–±—É –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ç–∞–±–ª–∏—Ü

---

## üìû **–ü–æ–¥–¥–µ—Ä–∂–∫–∞**

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–æ–≤ –≤ `.env.local`
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Supabase –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–∏ —Å —Ç–∞–±–ª–∏—Ü–µ–π `applications` 